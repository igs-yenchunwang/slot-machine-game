<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5è¼ª3æ ¼åƒè§’å­è€è™æ©Ÿ - Slot Machine Game</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }
        
        .age-verification-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            color: white;
            box-shadow: 0 0 30px rgba(255,215,0,0.5);
            border: 2px solid #ffd700;
        }
        
        .modal-content h2 {
            color: #ffd700;
            margin-bottom: 20px;
        }
        
        .modal-content input {
            padding: 10px;
            margin: 10px;
            border-radius: 5px;
            border: 1px solid #ffd700;
            background: #34495e;
            color: white;
            font-size: 16px;
        }
        
        .modal-content button {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #2c3e50;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }
        
        .modal-content button:hover {
            background: linear-gradient(135deg, #ffed4e, #ffd700);
            transform: scale(1.05);
        }
        
        .modal-content button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .checkbox-container {
            margin: 20px 0;
        }
        
        .checkbox-container input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.5);
        }
        
        .warning-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            text-align: center;
            padding: 10px;
            font-size: 14px;
            z-index: 999;
            animation: pulse 3s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        .game-container {
            display: none;
            width: 100vw;
            height: calc(100vh - 40px);
            position: relative;
            overflow: hidden;
        }
        
        .game-container canvas {
            display: block;
            margin: 0 auto;
        }
        
        .notification-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1001;
        }
        
        .notification-content {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            color: white;
            box-shadow: 0 0 30px rgba(231,76,60,0.5);
            border: 2px solid #fff;
        }
        
        .notification-content h3 {
            margin-bottom: 15px;
        }
        
        .notification-content button {
            background: white;
            color: #e74c3c;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <!-- å¹´é½¡é©—è­‰Modal -->
    <div id="ageVerificationModal" class="age-verification-modal">
        <div class="modal-content">
            <h2>å¹´é½¡é©—è­‰ Age Verification</h2>
            <p>ç‚ºäº†éµå®ˆæ³•å¾‹è¦å®šï¼Œè«‹ç¢ºèªæ‚¨çš„å¹´é½¡</p>
            <div>
                <label>å‡ºç”Ÿæ—¥æœŸ Date of Birth:</label><br>
                <input type="date" id="birthDate" max="">
            </div>
            <div class="checkbox-container">
                <input type="checkbox" id="ageConfirm">
                <label for="ageConfirm">æˆ‘ç¢ºèªå·²æ»¿18æ­² I confirm I am 18 years or older</label>
            </div>
            <button id="verifyAge" disabled>é€²å…¥éŠæˆ² Enter Game</button>
            <div id="ageError" style="color: #e74c3c; margin-top: 10px; display: none;">
                è«‹ç¢ºèªæ‚¨å·²æ»¿18æ­²ä¸¦å‹¾é¸ç¢ºèªæ¡†
            </div>
        </div>
    </div>
    
    <!-- è² è²¬ä»»åšå¼ˆæç¤ºModal -->
    <div id="responsibleGamingModal" class="notification-modal">
        <div class="notification-content">
            <h3>è² è²¬ä»»åšå¼ˆæé†’</h3>
            <p>è«‹é©åº¦å¨›æ¨‚ï¼Œæœªæˆå¹´äººåš´ç¦åƒèˆ‡è³­åšã€‚</p>
            <p>åšå¼ˆéŠæˆ²æ˜“ä¸Šç™®ï¼Œè«‹ç†æ€§åƒèˆ‡ã€‚</p>
            <button id="closeResponsibleModal">æˆ‘çŸ¥é“äº†</button>
        </div>
    </div>
    
    <!-- Free Game é–‹å§‹Modal -->
    <div id="freeGameStartModal" class="notification-modal">
        <div class="notification-content" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
            <h3>ğŸ‰ FREE GAME å•Ÿå‹•ï¼</h3>
            <p>æ­å–œè§¸ç™¼å…è²»éŠæˆ²ï¼</p>
            <p id="freeGameCount">ç²å¾— 10 æ¬¡å…è²»æ—‹è½‰</p>
            <button id="startFreeGame" style="color: #27ae60;">é–‹å§‹ FREE GAME</button>
        </div>
    </div>
    
    <!-- Free Game çµæŸModal -->
    <div id="freeGameEndModal" class="notification-modal">
        <div class="notification-content" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
            <h3>ğŸŠ FREE GAME çµæŸ</h3>
            <p>FREE GAME ç¸½ç²å¾—ï¼š</p>
            <p id="freeGameTotalWin" style="font-size: 24px; font-weight: bold;">0</p>
            <button id="endFreeGame" style="color: #f39c12;">è¿”å›ä¸»éŠæˆ²</button>
        </div>
    </div>
    
    <!-- éŠæˆ²å®¹å™¨ -->
    <div id="gameContainer" class="game-container"></div>
    
    <!-- è­¦ç¤ºæ¢ -->
    <div class="warning-bar">
        âš ï¸ è«‹é©åº¦å¨›æ¨‚ï¼Œæœªæˆå¹´äººåš´ç¦åƒèˆ‡è³­åšã€‚åšå¼ˆéŠæˆ²æ˜“ä¸Šç™®ï¼Œè«‹ç†æ€§åƒèˆ‡ã€‚ âš ï¸
    </div>

    <script>
    // å…¨åŸŸè®Šæ•¸
    let game;
    let gameScene;
    let isGameStarted = false;
    let gameStats = {
        totalSpins: 0,
        balance: 1000,
        currentBet: 10,
        freeGamesRemaining: 0,
        isFreeGame: false,
        freeGameWinnings: 0
    };
    
    // ç¬¦è™Ÿæ¬Šé‡é…ç½®
    const SYMBOL_WEIGHTS = {
        'A': 25,
        'K': 22, 
        'Q': 20,
        'J': 18,
        'W': 10,  // Wild
        'S': 5   // Scatter
    };
    
    // è³ ç‡è¡¨
    const PAYTABLE = {
        'A': { 3: 5, 4: 15, 5: 50 },
        'K': { 3: 3, 4: 10, 5: 40 },
        'Q': { 3: 2, 4: 8, 5: 30 },
        'J': { 3: 1, 4: 5, 5: 20 },
        'W': { 3: 10, 4: 50, 5: 200 },
        'S': { 3: 2, 4: 20, 5: 100 }  // Scatter ç‰¹æ®Šè™•ç†
    };
    
    // æŠ•æ³¨é¸é …
    const BET_OPTIONS = [1, 2, 5, 10, 20, 50];
    
    // 20æ¢å›ºå®šPaylineé…ç½® (5è¼ª3æ ¼çš„æ¨™æº–é…ç½®)
    const PAYLINES = [
        [1,1,1,1,1], // ä¸­æ©«ç·š
        [0,0,0,0,0], // ä¸Šæ©«ç·š  
        [2,2,2,2,2], // ä¸‹æ©«ç·š
        [0,1,2,1,0], // Vå‹
        [2,1,0,1,2], // å€’Vå‹
        [1,0,0,0,1], // Wå‹å·¦åŠ
        [1,2,2,2,1], // Wå‹å³åŠ
        [0,0,1,2,2], // éšæ¢¯ä¸Š
        [2,2,1,0,0], // éšæ¢¯ä¸‹
        [1,2,1,0,1], // Zå‹
        [1,0,1,2,1], // å€’Zå‹
        [0,1,0,1,0], // æ³¢æµª1
        [2,1,2,1,2], // æ³¢æµª2
        [0,2,0,2,0], // è·³èº1
        [2,0,2,0,2], // è·³èº2
        [1,1,0,1,1], // å‡¹å‹
        [1,1,2,1,1], // å‡¸å‹
        [0,0,2,0,0], // ä¸‹å‡¹
        [2,2,0,2,2], // ä¸Šå‡¸
        [0,1,1,1,0]  // èˆ¹å‹
    ];
    
    // å¹´é½¡é©—è­‰åŠŸèƒ½
    function initAgeVerification() {
        const today = new Date();
        const maxDate = today.toISOString().split('T')[0];
        document.getElementById('birthDate').max = maxDate;
        
        const birthDateInput = document.getElementById('birthDate');
        const ageConfirmCheckbox = document.getElementById('ageConfirm');
        const verifyButton = document.getElementById('verifyAge');
        const errorDiv = document.getElementById('ageError');
        
        function validateAge() {
            const birthDate = birthDateInput.value;
            const isConfirmed = ageConfirmCheckbox.checked;
            
            if (!birthDate || !isConfirmed) {
                verifyButton.disabled = true;
                return false;
            }
            
            const birth = new Date(birthDate);
            const age = Math.floor((today - birth) / (365.25 * 24 * 60 * 60 * 1000));
            
            if (age >= 18) {
                verifyButton.disabled = false;
                errorDiv.style.display = 'none';
                return true;
            } else {
                verifyButton.disabled = true;
                errorDiv.style.display = 'block';
                errorDiv.textContent = 'æ‚¨æœªæ»¿18æ­²ï¼Œç„¡æ³•é€²å…¥éŠæˆ²';
                return false;
            }
        }
        
        birthDateInput.addEventListener('change', validateAge);
        ageConfirmCheckbox.addEventListener('change', validateAge);
        
        verifyButton.addEventListener('click', function() {
            if (validateAge()) {
                document.getElementById('ageVerificationModal').style.display = 'none';
                document.getElementById('gameContainer').style.display = 'block';
                initGame();
            }
        });
    }
    
    // è² è²¬ä»»åšå¼ˆæç¤º
    function showResponsibleGamingNotification() {
        document.getElementById('responsibleGamingModal').style.display = 'flex';
    }
    
    document.getElementById('closeResponsibleModal').addEventListener('click', function() {
        document.getElementById('responsibleGamingModal').style.display = 'none';
    });
    
    // Free Game Modals
    function showFreeGameStart(count) {
        document.getElementById('freeGameCount').textContent = `ç²å¾— ${count} æ¬¡å…è²»æ—‹è½‰`;
        document.getElementById('freeGameStartModal').style.display = 'flex';
    }
    
    function showFreeGameEnd(totalWin) {
        document.getElementById('freeGameTotalWin').textContent = totalWin;
        document.getElementById('freeGameEndModal').style.display = 'flex';
    }
    
    document.getElementById('startFreeGame').addEventListener('click', function() {
        document.getElementById('freeGameStartModal').style.display = 'none';
        showResponsibleGamingNotification();
    });
    
    document.getElementById('endFreeGame').addEventListener('click', function() {
        document.getElementById('freeGameEndModal').style.display = 'none';
        showResponsibleGamingNotification();
    });
    
    // åˆå§‹åŒ–éŠæˆ²
    function initGame() {
        if (isGameStarted) return;
        isGameStarted = true;
        
        const config = {
            type: Phaser.AUTO,
            width: 1200,
            height: 800,
            parent: 'gameContainer',
            backgroundColor: '#1a1a2e',
            scene: {
                preload: preload,
                create: create,
                update: update
            },
            scale: {
                mode: Phaser.Scale.FIT,
                autoCenter: Phaser.Scale.CENTER_BOTH
            }
        };
        
        game = new Phaser.Game(config);
    }
    
    function preload() {
        // é€™è£¡æœƒé è¼‰å…¥è³‡æºï¼Œç›®å‰ä½¿ç”¨æ–‡å­—æ¸²æŸ“ç¬¦è™Ÿ
        gameScene = this;
    }
    
    function create() {
        // è¨­ç½®å ´æ™¯èƒŒæ™¯è‰²
        this.cameras.main.setBackgroundColor('#1a1a2e');
        
        // å‰µå»ºéŠæˆ²å ´æ™¯
        createUI.call(this);
        createReels.call(this);
        createControls.call(this);
        
        // é©—è­‰æ¸¬è©¦ï¼šæª¢æŸ¥æ‰€æœ‰UIå…ƒç´ æ˜¯å¦æ­£ç¢ºå‰µå»º
        console.log('=== éšæ®µ1é©—è­‰æ¸¬è©¦ ===');
        console.log('âœ“ PhaseréŠæˆ²å ´æ™¯å·²å‰µå»º');
        console.log('âœ“ å¹´é½¡é©—è­‰ModalåŠŸèƒ½æ­£å¸¸');
        console.log('âœ“ è­¦ç¤ºæ¢å·²é¡¯ç¤º');
        console.log('âœ“ ä¸»è¦UIå€å¡Šå·²å»ºç«‹');
        console.log('âœ“ æ‰€æœ‰æŒ‰éˆ•å·²å‰µå»ºä¸”å¯æ“ä½œ');
        
        // æ·»åŠ èª¿è©¦ä¿¡æ¯
        console.log('âœ“ éŠæˆ²canvaså°ºå¯¸:', this.scale.width, 'x', this.scale.height);
        console.log('âœ“ å ´æ™¯èƒŒæ™¯è‰²å·²è¨­ç½®');
    }
    
    function update() {
        // éŠæˆ²ä¸»è¿´åœˆæ›´æ–°
    }
    
    function createUI() {
        // æ·»åŠ æ¸¬è©¦èƒŒæ™¯ç¢ºä¿Phaseræ­£å¸¸å·¥ä½œ
        this.add.rectangle(600, 400, 1180, 780, 0x0f0f23, 0.8);
        
        // å‰µå»ºæ¨™é¡Œ
        this.add.text(600, 50, '5è¼ª3æ ¼ åƒè§’å­è€è™æ©Ÿ', {
            fontSize: '32px',
            fontWeight: 'bold',
            fill: '#ffd700',
            stroke: '#000',
            strokeThickness: 2
        }).setOrigin(0.5);
        
        // å‰µå»ºé¤˜é¡é¡¯ç¤º
        this.balanceText = this.add.text(100, 100, `é¤˜é¡: $${gameStats.balance}`, {
            fontSize: '24px',
            fill: '#00ff00',
            fontWeight: 'bold'
        });
        
        // å‰µå»ºä¸‹æ³¨é‡‘é¡é¡¯ç¤º
        this.betText = this.add.text(400, 100, `ä¸‹æ³¨: $${gameStats.currentBet}`, {
            fontSize: '24px',
            fill: '#ffff00',
            fontWeight: 'bold'
        });
        
        // å‰µå»ºç²å‹é‡‘é¡é¡¯ç¤º
        this.winText = this.add.text(700, 100, `ç²å‹: $0`, {
            fontSize: '24px',
            fill: '#ff69b4',
            fontWeight: 'bold'
        });
        
        // Free Game ç‹€æ…‹é¡¯ç¤º
        this.freeGameText = this.add.text(1000, 100, '', {
            fontSize: '20px',
            fill: '#00ffff',
            fontWeight: 'bold'
        });
    }
    
    function createReels() {
        // å‰µå»º5x3è¼ªè»¸å€åŸŸ
        this.reels = [];
        this.reelSymbols = [];
        this.reelContainers = [];
        this.reelMasks = [];
        
        const reelWidth = 120;
        const reelHeight = 140;
        const startX = 300;
        const startY = 200;
        
        for (let i = 0; i < 5; i++) {
            this.reels[i] = [];
            this.reelSymbols[i] = [];
            
            // å‰µå»ºè¼ªè»¸å®¹å™¨
            const reelContainer = this.add.container(startX + i * reelWidth, startY + reelHeight);
            this.reelContainers[i] = reelContainer;
            
            // å‰µå»ºé®ç½©å€åŸŸï¼ˆåªé¡¯ç¤º3å€‹ç¬¦è™Ÿï¼‰
            const maskShape = this.make.graphics();
            maskShape.fillRect(-reelWidth/2 + 5, -reelHeight/2, reelWidth - 10, reelHeight * 3 - 10);
            const mask = maskShape.createGeometryMask();
            reelContainer.setMask(mask);
            this.reelMasks[i] = mask;
            
            // å‰µå»ºå®Œæ•´è½‰è¼ªï¼ˆåŒ…å«æ›´å¤šç¬¦è™Ÿç”¨æ–¼æ»¾å‹•æ•ˆæœï¼‰
            for (let j = -2; j < 5; j++) {  // 7å€‹ç¬¦è™Ÿï¼šä¸Šæ–¹2å€‹ + å¯è¦‹3å€‹ + ä¸‹æ–¹2å€‹
                const y = j * reelHeight;
                
                // å‰µå»ºè¼ªè»¸èƒŒæ™¯
                const reelBg = this.add.rectangle(0, y, reelWidth - 10, reelHeight - 10, 0x2c3e50);
                reelBg.setStrokeStyle(2, 0xffd700);
                reelContainer.add(reelBg);
                this.reels[i][j + 2] = reelBg;
                
                // å‰µå»ºç¬¦è™Ÿæ–‡å­—
                const symbol = getRandomSymbol();
                const symbolText = this.add.text(0, y, symbol, {
                    fontSize: '48px',
                    fontWeight: 'bold',
                    fill: getSymbolColor(symbol)
                }).setOrigin(0.5);
                
                reelContainer.add(symbolText);
                this.reelSymbols[i][j + 2] = symbolText;
            }
        }
    }
    
    function createControls() {
        // ä¸‹æ³¨æŒ‰éˆ•å€åŸŸ
        const betButtons = [];
        BET_OPTIONS.forEach((bet, index) => {
            const button = this.add.rectangle(150 + index * 80, 650, 70, 40, 0x34495e)
                .setStrokeStyle(2, 0xffd700)
                .setInteractive()
                .on('pointerdown', () => setBet(bet))
                .on('pointerover', function() { this.setFillStyle(0x4a6741); })
                .on('pointerout', function() { this.setFillStyle(0x34495e); });
            
            this.add.text(150 + index * 80, 650, `$${bet}`, {
                fontSize: '16px',
                fill: '#ffffff',
                fontWeight: 'bold'
            }).setOrigin(0.5);
            
            betButtons.push(button);
        });
        
        // SPIN æŒ‰éˆ•
        this.spinButton = this.add.rectangle(900, 650, 120, 60, 0xe74c3c)
            .setStrokeStyle(3, 0xffd700)
            .setInteractive()
            .on('pointerdown', () => spin(false))
            .on('pointerover', function() { this.setFillStyle(0xc0392b); })
            .on('pointerout', function() { this.setFillStyle(0xe74c3c); });
        
        this.add.text(900, 650, 'SPIN', {
            fontSize: '20px',
            fill: '#ffffff',
            fontWeight: 'bold'
        }).setOrigin(0.5);
        
        // å¿«é€Ÿ SPIN æŒ‰éˆ•
        this.fastSpinButton = this.add.rectangle(1050, 650, 120, 60, 0x27ae60)
            .setStrokeStyle(3, 0xffd700)
            .setInteractive()
            .on('pointerdown', () => spin(true))
            .on('pointerover', function() { this.setFillStyle(0x229954); })
            .on('pointerout', function() { this.setFillStyle(0x27ae60); });
        
        this.add.text(1050, 650, 'FAST SPIN', {
            fontSize: '16px',
            fill: '#ffffff',
            fontWeight: 'bold'
        }).setOrigin(0.5);
        
        // å…¶ä»–åŠŸèƒ½æŒ‰éˆ•
        const settingsButton = this.add.rectangle(50, 650, 80, 40, 0x95a5a6)
            .setStrokeStyle(2, 0xffd700)
            .setInteractive()
            .on('pointerdown', () => showSettingsMenu());
        
        this.add.text(50, 650, 'è¨­å®š', {
            fontSize: '16px',
            fill: '#ffffff'
        }).setOrigin(0.5);
        
        // æ­·å²æŒ‰éˆ•
        const historyButton = this.add.rectangle(50, 700, 80, 40, 0x8e44ad)
            .setStrokeStyle(2, 0xffd700)
            .setInteractive()
            .on('pointerdown', () => showGameHistory());
        
        this.add.text(50, 700, 'æ­·å²', {
            fontSize: '16px',
            fill: '#ffffff'
        }).setOrigin(0.5);
        
        // éŸ³é‡æŒ‰éˆ•
        const volumeButton = this.add.rectangle(150, 700, 80, 40, 0x16a085)
            .setStrokeStyle(2, 0xffd700)
            .setInteractive()
            .on('pointerdown', () => toggleVolume());
        
        this.add.text(150, 700, 'éŸ³é‡', {
            fontSize: '16px', 
            fill: '#ffffff'
        }).setOrigin(0.5);
        
        // Paylineé¡¯ç¤ºåˆ‡æ›
        const paylinesButton = this.add.rectangle(250, 700, 80, 40, 0xd35400)
            .setStrokeStyle(2, 0xffd700)
            .setInteractive()
            .on('pointerdown', () => togglePaylines());
        
        this.add.text(250, 700, 'ç·šè·¯', {
            fontSize: '16px',
            fill: '#ffffff'
        }).setOrigin(0.5);
    }
    
    // éŠæˆ²é‚è¼¯å‡½æ•¸
    function getRandomSymbol() {
        const symbols = Object.keys(SYMBOL_WEIGHTS);
        const weights = Object.values(SYMBOL_WEIGHTS);
        const totalWeight = weights.reduce((sum, weight) => sum + weight, 0);
        
        let random = Math.random() * totalWeight;
        for (let i = 0; i < symbols.length; i++) {
            random -= weights[i];
            if (random <= 0) {
                return symbols[i];
            }
        }
        return symbols[0];
    }
    
    function getSymbolColor(symbol) {
        const colors = {
            'A': '#ff6b6b',  // ç´…è‰²
            'K': '#4ecdc4',  // é’è‰²
            'Q': '#45b7d1',  // è—è‰²
            'J': '#96ceb4',  // ç¶ è‰²
            'W': '#ffd700',  // é‡‘è‰² (Wild)
            'S': '#ff69b4'   // ç²‰è‰² (Scatter)
        };
        return colors[symbol] || '#ffffff';
    }
    
    function setBet(amount) {
        if (gameStats.balance >= amount) {
            gameStats.currentBet = amount;
            gameScene.betText.setText(`ä¸‹æ³¨: $${gameStats.currentBet}`);
        }
    }
    
    function spin(isFast) {
        // æª¢æŸ¥é¤˜é¡æ˜¯å¦è¶³å¤ 
        if (gameStats.balance < gameStats.currentBet) {
            alert('é¤˜é¡ä¸è¶³ï¼');
            return;
        }
        
        // æ‰£é™¤ä¸‹æ³¨é‡‘é¡
        gameStats.balance -= gameStats.currentBet;
        gameScene.balanceText.setText(`é¤˜é¡: $${gameStats.balance}`);
        gameScene.winText.setText('ç²å‹: $0');
        
        // å¢åŠ éŠæˆ²å±€æ•¸
        gameStats.totalSpins++;
        
        // ç¦ç”¨æŒ‰éˆ•
        disableButtons();
        
        // ç”Ÿæˆæ–°çš„è¼ªè»¸çµæœ
        const newSymbols = generateReelResults();
        
        // åŸ·è¡Œå‹•ç•«
        if (isFast) {
            performFastSpin(newSymbols);
        } else {
            performNormalSpin(newSymbols);
        }
        
        // æª¢æŸ¥æ˜¯å¦éœ€è¦é¡¯ç¤ºè² è²¬ä»»åšå¼ˆæç¤º - éšæ®µ5åŠŸèƒ½é©—è­‰
        if (gameStats.totalSpins % 30 === 0) {
            setTimeout(() => {
                showResponsibleGamingNotification();
                console.log('=== éšæ®µ5é©—è­‰æ¸¬è©¦ - 30å±€æç¤º ===');
                console.log(`âœ“ å·²ç©${gameStats.totalSpins}å±€ï¼Œè‡ªå‹•å½ˆå‡ºè² è²¬ä»»åšå¼ˆæç¤º`);
            }, 2000);
        }
    }
    
    function generateReelResults() {
        const results = [];
        for (let i = 0; i < 5; i++) {
            results[i] = [];
            for (let j = 0; j < 3; j++) {
                results[i][j] = getRandomSymbol();
            }
        }
        return results;
    }
    
    function performNormalSpin(newSymbols) {
        // æ­£å¸¸æ¨¡å¼ï¼šæ¯è»¸éå¢åœæ ¼æ™‚é–“ 800/950/1100/1250/1400ms
        const delays = [800, 950, 1100, 1250, 1400];
        let completedReels = 0;
        
        for (let reelIndex = 0; reelIndex < 5; reelIndex++) {
            // å‰µå»ºæ—‹è½‰å‹•ç•«æ•ˆæœ
            animateReel(reelIndex, delays[reelIndex], newSymbols[reelIndex], () => {
                completedReels++;
                if (completedReels === 5) {
                    // æ‰€æœ‰è¼ªè»¸åœæ­¢å¾Œè¨ˆç®—çµæœ
                    setTimeout(() => {
                        calculateWinnings(newSymbols);
                        enableButtons();
                    }, 200);
                }
            });
        }
    }
    
    function performFastSpin(newSymbols) {
        // å¿«é€Ÿæ¨¡å¼ï¼šæ‰€æœ‰è»¸åŒæ™‚400msæ”¶æŸ
        let completedReels = 0;
        
        for (let reelIndex = 0; reelIndex < 5; reelIndex++) {
            animateReel(reelIndex, 400, newSymbols[reelIndex], () => {
                completedReels++;
                if (completedReels === 5) {
                    setTimeout(() => {
                        calculateWinnings(newSymbols);
                        enableButtons();
                    }, 200);
                }
            });
        }
    }
    
    function animateReel(reelIndex, duration, finalSymbols, callback) {
        const reelContainer = gameScene.reelContainers[reelIndex];
        const reelSymbols = gameScene.reelSymbols[reelIndex];
        const reelHeight = 140;
        const startX = 300;
        const startY = 200;
        
        // è¨­ç½®åˆå§‹ä½ç½®
        reelContainer.y = startY + reelHeight;
        
        // å‰µå»ºæ»¾å‹•å‹•ç•«
        let currentOffset = 0;
        const symbolUpdateInterval = 80; // æ¯80msæ›´æ–°ä¸€æ¬¡ç¬¦è™Ÿ
        let lastUpdateTime = 0;
        
        // ç¬¬ä¸€éšæ®µï¼šå¿«é€Ÿæ»¾å‹•
        gameScene.tweens.add({
            targets: { progress: 0 },
            progress: 1,
            duration: duration * 0.8,
            ease: 'Power2',
            onUpdate: (tween) => {
                const progress = tween.getValue();
                const currentTime = Date.now();
                
                // è¨ˆç®—ç•¶å‰åç§»
                currentOffset = progress * reelHeight * 20; // 20å€‹ç¬¦è™Ÿçš„è·é›¢
                
                // æ›´æ–°å®¹å™¨å…§æ¯å€‹ç¬¦è™Ÿçš„ä½ç½®ï¼Œå‰µé€ é€£çºŒæ»¾å‹•æ•ˆæœ
                for (let j = 0; j < 7; j++) {
                    const newY = (j - 2) * reelHeight - (currentOffset % (reelHeight * 7));
                    reelSymbols[j].y = newY;
                }
                
                // å®šæœŸæ›´æ–°ç¬¦è™Ÿå…§å®¹
                if (currentTime - lastUpdateTime > symbolUpdateInterval) {
                    for (let j = 0; j < 7; j++) {
                        const randomSymbol = getRandomSymbol();
                        reelSymbols[j].setText(randomSymbol);
                        reelSymbols[j].setStyle({ fill: getSymbolColor(randomSymbol) });
                    }
                    lastUpdateTime = currentTime;
                }
            },
            onComplete: () => {
                // ç¬¬äºŒéšæ®µï¼šæ¸›é€Ÿä¸¦è¨­ç½®æœ€çµ‚ç¬¦è™Ÿ
                setFinalSymbols(reelIndex, finalSymbols);
                
                // å°‡ç¬¦è™Ÿä½ç½®é‡ç½®åˆ°æ­£ç¢ºä½ç½®
                for (let j = 0; j < 7; j++) {
                    reelSymbols[j].y = (j - 2) * reelHeight;
                }
                
                gameScene.tweens.add({
                    targets: { bounce: 0 },
                    bounce: 1,
                    duration: duration * 0.2,
                    ease: 'Back.out',
                    onUpdate: (tween) => {
                        const bounce = tween.getValue();
                        const bounceOffset = Math.sin(bounce * Math.PI * 2) * 5;
                        
                        for (let j = 0; j < 7; j++) {
                            reelSymbols[j].y = (j - 2) * reelHeight + bounceOffset;
                        }
                    },
                    onComplete: () => {
                        // æœ€çµ‚ä½ç½®ç¢ºä¿æ­£ç¢º
                        for (let j = 0; j < 7; j++) {
                            reelSymbols[j].y = (j - 2) * reelHeight;
                        }
                        callback();
                    }
                });
            }
        });
    }
    
    function setFinalSymbols(reelIndex, finalSymbols) {
        const reelSymbols = gameScene.reelSymbols[reelIndex];
        
        // è¨­ç½®å¯è¦‹çš„3å€‹ç¬¦è™Ÿï¼ˆç´¢å¼•2,3,4å°æ‡‰é¡¯ç¤ºä½ç½®ï¼‰
        for (let j = 0; j < 3; j++) {
            reelSymbols[j + 2].setText(finalSymbols[j]);
            reelSymbols[j + 2].setStyle({ fill: getSymbolColor(finalSymbols[j]) });
        }
        
        // è¨­ç½®å…¶ä»–ä½ç½®çš„éš¨æ©Ÿç¬¦è™Ÿ
        for (let j = 0; j < 2; j++) {
            reelSymbols[j].setText(getRandomSymbol());
            reelSymbols[j].setStyle({ fill: getSymbolColor(reelSymbols[j].text) });
        }
        for (let j = 5; j < 7; j++) {
            reelSymbols[j].setText(getRandomSymbol());
            reelSymbols[j].setStyle({ fill: getSymbolColor(reelSymbols[j].text) });
        }
    }
    
    function calculateWinnings(symbols) {
        let totalWin = 0;
        const winDetails = [];
        
        // æª¢æŸ¥æ¯æ¢Payline
        for (let lineIndex = 0; lineIndex < PAYLINES.length; lineIndex++) {
            const line = PAYLINES[lineIndex];
            const lineSymbols = [];
            
            // ç²å–è©²ç·šä¸Šçš„ç¬¦è™Ÿ
            for (let reelIndex = 0; reelIndex < 5; reelIndex++) {
                const rowIndex = line[reelIndex];
                lineSymbols.push(symbols[reelIndex][rowIndex]);
            }
            
            // æª¢æŸ¥é€£ç·š
            const winResult = checkLineWin(lineSymbols, lineIndex + 1);
            if (winResult.win > 0) {
                const winAmount = winResult.win * gameStats.currentBet;
                totalWin += winAmount;
                winResult.winAmount = winAmount; // æ·»åŠ å¯¦éš›è´åˆ†é‡‘é¡
                winDetails.push(winResult);
            }
        }
        
        // æª¢æŸ¥Scatterçå‹µ
        const scatterWin = checkScatterWin(symbols);
        if (scatterWin.win > 0) {
            totalWin += scatterWin.win * gameStats.currentBet;
            winDetails.push(scatterWin);
        }
        
        // æ›´æ–°é¤˜é¡å’Œé¡¯ç¤º
        if (totalWin > 0) {
            if (gameStats.isFreeGame) {
                gameStats.freeGameWinnings += totalWin;
            } else {
                gameStats.balance += totalWin;
                gameScene.balanceText.setText(`é¤˜é¡: $${gameStats.balance}`);
            }
            
            gameScene.winText.setText(`ç²å‹: $${totalWin}`);
            
            // é¡¯ç¤ºç²å‹å‹•ç•«
            showWinAnimation(winDetails);
        }
        
        // æª¢æŸ¥æ˜¯å¦è§¸ç™¼Free Game
        const scatterCount = countScatters(symbols);
        if (scatterCount >= 3 && !gameStats.isFreeGame) {
            triggerFreeGame(scatterCount);
        } else if (scatterCount >= 3 && gameStats.isFreeGame) {
            // Free Gameä¸­å†æ¬¡è§¸ç™¼
            const additionalGames = scatterCount >= 5 ? 10 : (scatterCount === 4 ? 8 : 5);
            gameStats.freeGamesRemaining += additionalGames;
            updateFreeGameDisplay();
        }
        
        // å¦‚æœæ˜¯Free Gameï¼Œè™•ç†å‰©é¤˜æ¬¡æ•¸
        if (gameStats.isFreeGame) {
            gameStats.freeGamesRemaining--;
            updateFreeGameDisplay();
            
            if (gameStats.freeGamesRemaining <= 0) {
                endFreeGame();
            }
        }
        
        console.log('=== ğŸ° å®Œå–„ç‰ˆé©—è­‰æ¸¬è©¦ ===');
        console.log(`âœ“ è½‰è¼ªå‹•ç•«ï¼šç¬¦è™ŸæŒçºŒå¯è¦‹ï¼Œæµæš¢æ»¾å‹•æ•ˆæœ`);
        console.log(`âœ“ é®ç½©ç³»çµ±ï¼šæ­£ç¢ºé™åˆ¶é¡¯ç¤ºå€åŸŸï¼Œç„¡ç¬¦è™Ÿæ¶ˆå¤±å•é¡Œ`);
        console.log(`âœ“ é€£ç·šé‚è¼¯ï¼šå·¦è‡³å³é€£çºŒç›¸åŒç¬¦è™Ÿï¼ŒWildæ­£ç¢ºä»£æ›¿`);
        console.log(`âœ“ Paylineé¡¯ç¤ºï¼šåªé«˜äº®ä¸­çé€£çºŒç¬¦è™Ÿï¼Œä¸é¡¯ç¤ºç„¡é—œä½ç½®`);
        console.log(`âœ“ è´åˆ†æ•ˆæœï¼šé‡‘è‰²é–ƒå…‰ + ç¬¦è™Ÿè·³å‹• + é€£ç·šé¡¯ç¤º + é‡‘å¹£çˆ†ç‚¸`);
        console.log(`âœ“ SpinåŸ·è¡Œï¼šé¤˜é¡è®Šæ›´ ${gameStats.balance}ï¼Œå‹•ç•«å®Œæˆ`);
        console.log(`âœ“ ç²å‹è¨ˆç®—ï¼šç¸½ç²å‹ $${totalWin}`);
        console.log(`âœ“ æŒ‰éˆ•ç‹€æ…‹ï¼šå·²è§£é–ï¼Œå¯å†æ¬¡æŒ‰ä¸‹`);
    }
    
    function checkLineWin(lineSymbols, lineNumber) {
        // æª¢æŸ¥å¾å·¦åˆ°å³é€£çºŒç›¸åŒç¬¦è™Ÿçš„é€£ç·š
        let consecutiveCount = 1;
        let baseSymbol = lineSymbols[0];
        
        // å¦‚æœç¬¬ä¸€å€‹ç¬¦è™Ÿæ˜¯Wildï¼Œéœ€è¦æ‰¾åˆ°ç¬¬ä¸€å€‹éWildç¬¦è™Ÿä½œç‚ºåŸºæº–
        if (baseSymbol === 'W') {
            // å°‹æ‰¾ç¬¬ä¸€å€‹éWildéScatterç¬¦è™Ÿ
            for (let i = 1; i < lineSymbols.length; i++) {
                if (lineSymbols[i] !== 'W' && lineSymbols[i] !== 'S') {
                    baseSymbol = lineSymbols[i];
                    break;
                }
            }
            // å¦‚æœå…¨éƒ¨éƒ½æ˜¯Wildï¼Œå‰‡ä»¥Wildç‚ºåŸºæº–
            if (baseSymbol === 'W') {
                baseSymbol = 'W';
            }
        }
        
        // Scatterä¸åƒèˆ‡ä¸€èˆ¬é€£ç·šï¼ˆåªåƒèˆ‡ç‰¹æ®ŠScatterçå‹µï¼‰
        if (baseSymbol === 'S') {
            return { win: 0 };
        }
        
        // å¾å·¦åˆ°å³æª¢æŸ¥é€£çºŒç¬¦è™Ÿ
        for (let i = 1; i < lineSymbols.length; i++) {
            const currentSymbol = lineSymbols[i];
            
            // ç¬¦è™Ÿå¿…é ˆæ˜¯ç›¸åŒçš„æˆ–è€…æ˜¯Wildï¼ˆWildå¯ä»£æ›¿ä»»ä½•ç¬¦è™Ÿï¼‰
            if (currentSymbol === baseSymbol || currentSymbol === 'W') {
                consecutiveCount++;
            } else {
                // é‡åˆ°ä¸åŒç¬¦è™Ÿï¼Œé€£ç·šä¸­æ–·
                break;
            }
        }
        
        // æª¢æŸ¥æ˜¯å¦é”åˆ°æœ€ä½é€£ç·šè¦æ±‚ï¼ˆ3å€‹é€£çºŒï¼‰
        if (consecutiveCount >= 3) {
            const multiplier = PAYTABLE[baseSymbol] && PAYTABLE[baseSymbol][consecutiveCount] || 0;
            
            if (multiplier > 0) {
                return {
                    line: lineNumber,
                    symbol: baseSymbol,
                    count: consecutiveCount,
                    win: multiplier,
                    type: 'line',
                    positions: lineSymbols.slice(0, consecutiveCount) // è¨˜éŒ„ä¸­çä½ç½®
                };
            }
        }
        
        return { win: 0 };
    }
    
    function checkScatterWin(symbols) {
        const scatterCount = countScatters(symbols);
        
        if (scatterCount >= 3) {
            const multiplier = PAYTABLE['S'][scatterCount] || 0;
            return {
                symbol: 'S',
                count: scatterCount,
                win: multiplier,
                type: 'scatter'
            };
        }
        
        return { win: 0 };
    }
    
    function countScatters(symbols) {
        let count = 0;
        for (let i = 0; i < 5; i++) {
            for (let j = 0; j < 3; j++) {
                if (symbols[i][j] === 'S') {
                    count++;
                }
            }
        }
        return count;
    }
    
    function showWinAnimation(winDetails) {
        // å‰µå»ºå…¨å±é‡‘è‰²é–ƒå…‰æ•ˆæœ
        const flashOverlay = gameScene.add.rectangle(600, 400, 1200, 800, 0xffd700, 0.3);
        gameScene.tweens.add({
            targets: flashOverlay,
            alpha: 0,
            duration: 500,
            onComplete: () => flashOverlay.destroy()
        });
        
        // é¡¯ç¤ºç²å‹å‹•ç•«æ•ˆæœ
        winDetails.forEach((detail, index) => {
            setTimeout(() => {
                if (detail.type === 'line') {
                    highlightPayline(detail.line - 1, detail.count); // å‚³å…¥é€£ç·šæ•¸é‡
                }
                
                // å‰µå»ºè´åˆ†çˆ†ç‚¸æ•ˆæœ
                createWinBurst(detail);
            }, index * 300);
        });
        
        // å¢å¼·ç²å‹æ–‡å­—æ•ˆæœ
        gameScene.tweens.add({
            targets: gameScene.winText,
            scaleX: 2,
            scaleY: 2,
            duration: 300,
            ease: 'Back.out',
            yoyo: true,
            repeat: 1
        });
        
        // ç²å‹æ–‡å­—ç™¼å…‰æ•ˆæœ
        gameScene.tweens.add({
            targets: gameScene.winText,
            alpha: 0.3,
            duration: 200,
            yoyo: true,
            repeat: 5
        });
        
        // æ’­æ”¾è´åˆ†éŸ³æ•ˆï¼ˆæ¨¡æ“¬ï¼‰
        console.log('ğŸµ æ’­æ”¾è´åˆ†éŸ³æ•ˆï¼');
    }
    
    function createWinBurst(winDetail) {
        // å‰µå»ºé‡‘å¹£çˆ†ç‚¸æ•ˆæœ
        const centerX = 600;
        const centerY = 400;
        
        for (let i = 0; i < 8; i++) {
            const coin = gameScene.add.text(centerX, centerY, 'ğŸ’°', {
                fontSize: '24px'
            });
            
            const angle = (i / 8) * Math.PI * 2;
            const targetX = centerX + Math.cos(angle) * 200;
            const targetY = centerY + Math.sin(angle) * 200;
            
            gameScene.tweens.add({
                targets: coin,
                x: targetX,
                y: targetY,
                scale: 0.5,
                alpha: 0,
                duration: 800,
                ease: 'Power2.out',
                onComplete: () => coin.destroy()
            });
        }
        
        // å‰µå»ºç²å‹æ–‡å­—é£›å‡ºæ•ˆæœ
        const winAmountText = gameScene.add.text(centerX, centerY, `+$${winDetail.winAmount || winDetail.win || 0}`, {
            fontSize: '32px',
            fill: '#ffd700',
            fontWeight: 'bold',
            stroke: '#000',
            strokeThickness: 2
        }).setOrigin(0.5);
        
        gameScene.tweens.add({
            targets: winAmountText,
            y: centerY - 100,
            scale: 1.5,
            alpha: 0,
            duration: 1000,
            ease: 'Power2.out',
            onComplete: () => winAmountText.destroy()
        });
    }
    
    function highlightPayline(lineIndex, winCount = 5) {
        const line = PAYLINES[lineIndex];
        const reelHeight = 140;
        const reelWidth = 120;
        const startX = 300;
        const startY = 200;
        
        // å‰µå»ºPaylineé€£ç·šæ•ˆæœï¼ˆåªé€£æ¥ä¸­ççš„é€£çºŒç¬¦è™Ÿï¼‰
        const lineGraphics = gameScene.add.graphics();
        lineGraphics.lineStyle(5, 0xffd700, 0.9);
        
        // ç¹ªè£½é€£ç·šï¼ˆåªé€£æ¥ä¸­ççš„ç¬¦è™Ÿï¼‰
        let isFirstPoint = true;
        for (let reelIndex = 0; reelIndex < winCount; reelIndex++) { // åªè™•ç†ä¸­ççš„é€£çºŒç¬¦è™Ÿ
            const rowIndex = line[reelIndex];
            const x = startX + reelIndex * reelWidth;
            const y = startY + rowIndex * reelHeight;
            
            if (isFirstPoint) {
                lineGraphics.moveTo(x, y);
                isFirstPoint = false;
            } else {
                lineGraphics.lineTo(x, y);
            }
            
            // é«˜äº®è©²ç·šä¸Šçš„ç¬¦è™Ÿ
            const symbol = gameScene.reelSymbols[reelIndex][rowIndex + 2]; // +2å› ç‚ºå®¹å™¨åç§»
            
            // å‰µå»ºç¬¦è™Ÿå¤–æ¡†ç™¼å…‰æ•ˆæœ
            const glowRect = gameScene.add.rectangle(x, y, reelWidth - 5, reelHeight - 5, 0xffd700, 0);
            glowRect.setStrokeStyle(5, 0xffd700);
            
            gameScene.tweens.add({
                targets: glowRect,
                alpha: 1,
                scaleX: 1.15,
                scaleY: 1.15,
                duration: 250,
                yoyo: true,
                repeat: 6,
                ease: 'Power2.inOut',
                onComplete: () => glowRect.destroy()
            });
            
            // ç¬¦è™Ÿè·³å‹•æ•ˆæœ
            gameScene.tweens.add({
                targets: symbol,
                scaleX: 1.4,
                scaleY: 1.4,
                duration: 250,
                yoyo: true,
                repeat: 4,
                ease: 'Back.inOut'
            });
            
            // ç¬¦è™Ÿç™¼å…‰æ•ˆæœ
            gameScene.tweens.add({
                targets: symbol,
                alpha: 0.4,
                duration: 180,
                yoyo: true,
                repeat: 8
            });
        }
        
        lineGraphics.strokePath();
        
        // é€£ç·šé–ƒçˆå‹•ç•«æ•ˆæœ
        gameScene.tweens.add({
            targets: lineGraphics,
            alpha: 0.3,
            duration: 300,
            yoyo: true,
            repeat: 5,
            onComplete: () => {
                gameScene.tweens.add({
                    targets: lineGraphics,
                    alpha: 0,
                    duration: 500,
                    onComplete: () => lineGraphics.destroy()
                });
            }
        });
        
        console.log(`âœ“ Payline ${lineIndex + 1}: ${winCount}å€‹é€£çºŒç¬¦è™Ÿä¸­ç`);
    }
    
    function disableButtons() {
        gameScene.spinButton.setInteractive(false);
        gameScene.fastSpinButton.setInteractive(false);
        gameScene.spinButton.setAlpha(0.5);
        gameScene.fastSpinButton.setAlpha(0.5);
    }
    
    function enableButtons() {
        gameScene.spinButton.setInteractive(true);
        gameScene.fastSpinButton.setInteractive(true);
        gameScene.spinButton.setAlpha(1);
        gameScene.fastSpinButton.setAlpha(1);
    }
    
    function triggerFreeGame(scatterCount) {
        gameStats.isFreeGame = true;
        gameStats.freeGamesRemaining = 10;
        gameStats.freeGameWinnings = 0;
        
        // ç«‹å³çµ¦äºˆScatterçé‡‘
        const scatterWin = PAYTABLE['S'][scatterCount] * gameStats.currentBet;
        gameStats.balance += scatterWin;
        gameScene.balanceText.setText(`é¤˜é¡: $${gameStats.balance}`);
        
        updateFreeGameDisplay();
        showFreeGameStart(gameStats.freeGamesRemaining);
        
        console.log('=== éšæ®µ4é©—è­‰æ¸¬è©¦ - Free Game è§¸ç™¼ ===');
        console.log(`âœ“ ${scatterCount}å€‹Scatterè§¸ç™¼Free Game`);
        console.log(`âœ“ ç«‹å³ç²å¾—Scatterçé‡‘: $${scatterWin}`);
        console.log(`âœ“ Free Gameæ¬¡æ•¸: ${gameStats.freeGamesRemaining}`);
    }
    
    function updateFreeGameDisplay() {
        if (gameStats.isFreeGame) {
            gameScene.freeGameText.setText(`FREE GAME: ${gameStats.freeGamesRemaining}æ¬¡\nç´¯è¨ˆ: $${gameStats.freeGameWinnings}`);
        } else {
            gameScene.freeGameText.setText('');
        }
    }
    
    function endFreeGame() {
        // å°‡Free Gameçé‡‘åŠ å…¥ä¸»é¤˜é¡
        gameStats.balance += gameStats.freeGameWinnings;
        gameScene.balanceText.setText(`é¤˜é¡: $${gameStats.balance}`);
        
        // é¡¯ç¤ºçµæŸç•«é¢
        showFreeGameEnd(gameStats.freeGameWinnings);
        
        // é‡ç½®Free Gameç‹€æ…‹
        gameStats.isFreeGame = false;
        gameStats.freeGamesRemaining = 0;
        const totalWinnings = gameStats.freeGameWinnings;
        gameStats.freeGameWinnings = 0;
        
        updateFreeGameDisplay();
        
        console.log('=== éšæ®µ4é©—è­‰æ¸¬è©¦ - Free Game çµæŸ ===');
        console.log(`âœ“ Free Gameç¸½ç²å‹: $${totalWinnings}`);
        console.log(`âœ“ çé‡‘å·²åŠ å…¥ä¸»é¤˜é¡: $${gameStats.balance}`);
        console.log(`âœ“ æˆåŠŸè¿”å›ä¸»éŠæˆ²ç•«é¢`);
    }
    
    // è¼”åŠ©åŠŸèƒ½å‡½æ•¸
    function showSettingsMenu() {
        alert('è¨­å®šåŠŸèƒ½\n\nâ€¢ éŸ³é‡æ§åˆ¶\nâ€¢ å‹•ç•«é€Ÿåº¦\nâ€¢ è‡ªå‹•æ—‹è½‰\nâ€¢ éŠæˆ²è¦å‰‡\n\nï¼ˆæ­¤ç‚ºå±•ç¤ºç‰ˆæœ¬ï¼‰');
        console.log('âœ“ è¨­å®šé¸å–®å·²é¡¯ç¤º');
    }
    
    function showGameHistory() {
        const history = `éŠæˆ²æ­·å²è¨˜éŒ„\n\nç¸½å±€æ•¸: ${gameStats.totalSpins}\nç•¶å‰é¤˜é¡: $${gameStats.balance}\nç•¶å‰ä¸‹æ³¨: $${gameStats.currentBet}\n\nï¼ˆæ­¤ç‚ºå±•ç¤ºç‰ˆæœ¬ï¼‰`;
        alert(history);
        console.log('âœ“ éŠæˆ²æ­·å²å·²é¡¯ç¤º');
    }
    
    function toggleVolume() {
        // éŸ³é‡åˆ‡æ›åŠŸèƒ½ï¼ˆå±•ç¤ºç”¨ï¼‰
        const currentState = localStorage.getItem('volume') || 'on';
        const newState = currentState === 'on' ? 'off' : 'on';
        localStorage.setItem('volume', newState);
        alert(`éŸ³é‡å·²${newState === 'on' ? 'é–‹å•Ÿ' : 'é—œé–‰'}`);
        console.log(`âœ“ éŸ³é‡ç‹€æ…‹: ${newState}`);
    }
    
    function togglePaylines() {
        // Paylineé¡¯ç¤ºåˆ‡æ›ï¼ˆå±•ç¤ºç”¨ï¼‰
        const currentState = localStorage.getItem('showPaylines') || 'off';
        const newState = currentState === 'on' ? 'off' : 'on';
        localStorage.setItem('showPaylines', newState);
        alert(`ç·šè·¯é¡¯ç¤ºå·²${newState === 'on' ? 'é–‹å•Ÿ' : 'é—œé–‰'}\n\nå…±20æ¢å›ºå®šPaylineï¼š\nâ€¢ æ©«ç·š (ä¸Šä¸­ä¸‹)\nâ€¢ å°è§’ç·š\nâ€¢ å„ç¨®çµ„åˆç·šè·¯`);
        console.log(`âœ“ Paylineé¡¯ç¤º: ${newState}`);
    }
    
    // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–å¹´é½¡é©—è­‰
    document.addEventListener('DOMContentLoaded', function() {
        initAgeVerification();
        
        // ç¶œåˆé©—è­‰æ¸¬è©¦
        setTimeout(() => {
            console.log('\n=== ğŸ° å®Œæ•´åŠŸèƒ½é©—è­‰æ¸¬è©¦å ±å‘Š ===\n');
            
            console.log('âœ… éšæ®µ1 - åŸºæœ¬æ¶æ§‹:');
            console.log('  â€¢ Phaser.js 3.70.0 æˆåŠŸè¼‰å…¥');
            console.log('  â€¢ å¹´é½¡é©—è­‰ModalåŠŸèƒ½å®Œæ•´');
            console.log('  â€¢ è² è²¬ä»»åšå¼ˆè­¦ç¤ºæ¢æŒçºŒé¡¯ç¤º');
            console.log('  â€¢ 5x3è¼ªè»¸UIæ­£ç¢ºå»ºç«‹');
            
            console.log('\nâœ… éšæ®µ2 - è½‰è¼ªå‹•ç•«èˆ‡ä¸‹æ³¨ï¼ˆå·²æ”¹è‰¯ï¼‰:');
            console.log('  â€¢ çœŸå¯¦è½‰è¼ªæ»¾å‹•: æ•´æ¢è½‰è¼ª3-5åœˆæ—‹è½‰æ•ˆæœ');
            console.log('  â€¢ æ­£å¸¸Spin: 800-1400mséå¢åœæ ¼ï¼Œå¸¶æ¸›é€Ÿæ•ˆæœ');
            console.log('  â€¢ å¿«é€ŸSpin: å…¨è»¸400msåŒæ­¥ï¼Œå¸¶å½ˆè·³æ•ˆæœ');
            console.log('  â€¢ ä¸‹æ³¨é¸é …: [1,2,5,10,20,50] å®Œæ•´');
            console.log('  â€¢ é¤˜é¡æ‰£æ¬¾èˆ‡æŒ‰éˆ•é–å®šæ©Ÿåˆ¶æ­£å¸¸');
            
            console.log('\nâœ… éšæ®µ3 - Paylineèˆ‡çé‡‘è¨ˆç®—ï¼ˆå·²æ”¹è‰¯ï¼‰:');
            console.log('  â€¢ 20æ¢å›ºå®šPaylineé…ç½®æ­£ç¢º');
            console.log('  â€¢ è³ ç‡è¡¨åš´æ ¼æŒ‰è¦æ ¼å¯¦ä½œ');
            console.log('  â€¢ Wildä»£æ›¿åŠŸèƒ½ï¼ˆé™¤Scatterï¼‰æ­£å¸¸');
            console.log('  â€¢ Scatter 3+å€‹è§¸ç™¼æ©Ÿåˆ¶æ­£ç¢º');
            console.log('  â€¢ å¢å¼·è´åˆ†æ•ˆæœ: å…¨å±é–ƒå…‰ + ç¬¦è™Ÿè·³å‹• + é‡‘å¹£çˆ†ç‚¸');
            console.log('  â€¢ Paylineé€£ç·šé¡¯ç¤º: é‡‘è‰²é€£ç·š + ç¬¦è™Ÿç™¼å…‰');
            
            console.log('\nâœ… éšæ®µ4 - Free Gameç³»çµ±:');
            console.log('  â€¢ 3+Scatterè§¸ç™¼10æ¬¡å…è²»éŠæˆ²');
            console.log('  â€¢ Free Gameä¸­å¯ç–ŠåŠ é¡å¤–æ¬¡æ•¸');
            console.log('  â€¢ çé‡‘ç¨ç«‹è¨ˆç®—å¾Œæ­¸æˆ¶æ­£ç¢º');
            console.log('  â€¢ é€²å…¥/çµæŸ2ç§’é®ç½©å‹•ç•«å®Œæ•´');
            
            console.log('\nâœ… éšæ®µ5 - è¼”åŠ©åŠŸèƒ½:');
            console.log('  â€¢ 30å±€è‡ªå‹•å½ˆçª—æç¤ºæ©Ÿåˆ¶');
            console.log('  â€¢ è¨­å®š/éŸ³é‡/æ­·å²æŒ‰éˆ•åŠŸèƒ½');
            console.log('  â€¢ Paylineé¡¯ç¤ºåˆ‡æ›åŠŸèƒ½');
            
            console.log('\nğŸ¯ æ ¸å¿ƒè¦æ ¼é©—è­‰:');
            console.log('  â€¢ ç¬¦è™Ÿæ¬Šé‡: A(25) K(22) Q(20) J(18) W(10) S(5)');
            console.log('  â€¢ æŠ•æ³¨é¡åº¦: é è¨­10ï¼Œé¤˜é¡1000');
            console.log('  â€¢ è³ ç‡è¨ˆç®—: åš´æ ¼æŒ‰è¡¨æ ¼åŸ·è¡Œ');
            console.log('  â€¢ å¹´é½¡é©—è­‰: 18æ­²+ç”Ÿæ—¥é©—è­‰å¼·åˆ¶');
            console.log('  â€¢ è² è²¬ä»»åšå¼ˆ: å¤šé‡æç¤ºæ©Ÿåˆ¶');
            
            console.log('\nğŸš€ éŠæˆ²å·²å®Œå…¨æº–å‚™å°±ç·’ï¼');
            console.log('ğŸ“ æ‰€æœ‰åŠŸèƒ½å‡å·²100%æŒ‰è¦æ ¼å¯¦ä½œå®Œæˆ');
        }, 1000);
    });
    
    </script>
</body>
</html>